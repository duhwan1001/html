<!DOCTYPE html>
<html lang="kr">
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>
		<script>
			/*	주민등록번호를 입력 받아 생년월일과 성별을 출력*/
			do{
				var num = prompt("주민등록번호 13자리를 입력해주세요 ( - ) 포함");
			}while(num.length < 14);
			
			document.write(num + "<br>");
			
			var year = num.substr(0,2);
			var month = num.substr(2,2); 
			var day = num.substr(4,2);
			
			var genderNo = "";
			if(num.substr(7,1) == "1" || num.substr(7,1) == "3"){
				genderNo = "남성";
			} else if((num.substr(7,1) == "2" || num.substr(7,1) || "4")){
				genderNo = "여성";
			} else {
				genderNo = "알수없음";
			}
			var gender = genderNo;
				
			document.write("연도 : " + year + "<br>");
			document.write("월 : " + month + "<br>");
			document.write("일 : " + day + "<br>");
			document.write("성별 : " + gender + "<br>");
			
			function proc() {
				var value = document.getElementById("jumin").value;
				
				var year = value.substr(0,2);
				var month = value.substr(2,2); 
				var day = value.substr(4,2);
				
				var genderNo = "";
				if(value.substr(7,1) == "1" || value.substr(7,1) == "3"){
					genderNo = "남성";
				} else if((value.substr(7,1) == "2" || value.substr(7,1) || "4")){
					genderNo = "여성";
				} else {
					genderNo = "알수없음";
				}
				var gender = genderNo;
				
				if(value.substr(7,1) == "1" || value.substr(7,1) == "2" ){
					year = "19" + year;
				} else if((value.substr(7,1) == "3" || value.substr(7,1) || "4")){
					year = "20" + year;
				}
				document.getElementById("spYear").innerHTML = year;
				document.getElementById("spMonth").innerHTML = month;
				document.getElementById("spDay").innerHTML = day;
				document.getElementById("spGender").innerHTML = gender;
			}
		</script>
	</head>
	<body>
		주민등록번호 : <input type="text" id="jumin">
		<button type="button" onclick="proc()">확인</button>
		<hr>
		연도 : <span id="spYear"></span><br>
		월 : <span id="spMonth"></span><br>
		일 : <span id="spDay"></span><br>
		성별 : <span id="spGender"></span><br>
		<hr>
		<h3>주민등록번호 유효성 검사</h3>
		주민등록번호 : <input type="text" id="jumin2">
		<button type="button" onclick="proc2()">확인</button>
	</body>
	<script>
		function proc2(){
			var A = document.getElementById("jumin2").value.charAt(0);
			var B = document.getElementById("jumin2").value.charAt(1);
			var C = document.getElementById("jumin2").value.charAt(2);
			var D = document.getElementById("jumin2").value.charAt(3);
			var E = document.getElementById("jumin2").value.charAt(4);
			var F = document.getElementById("jumin2").value.charAt(5);
			var G = document.getElementById("jumin2").value.charAt(7);
			var H = document.getElementById("jumin2").value.charAt(8);
			var I = document.getElementById("jumin2").value.charAt(9);
			var J = document.getElementById("jumin2").value.charAt(10);
			var K = document.getElementById("jumin2").value.charAt(11);
			var L = document.getElementById("jumin2").value.charAt(12);
			var M = document.getElementById("jumin2").value.charAt(13);
			//총합을 구한다
			var sum = A*2 + B*3 + C*4 + D*5 + E*6 + F*7 + G*8 + H*9 + I*2 + J*3 + K*4 + L*5;
			console.log(sum);
			//1번의 합을 11로 나눈 나머지를 구한다
			var less = sum % 11;
			console.log(less);
			//11에서 2번의 결과를 뺀다
			var result = 11 - less;
			console.log(result);
			//3번의 결과가 0 ~ 9면 값 그대로, 10이면 0 , 11이면 1로 변환
			
			//4번의 결과가 M자리의 값과 같으면 맞는 번호이다.
			var flag = Boolean(false);
			if (result == M){
				flag = true;
				console.log(flag);
				alert("유효성검사 통과");
			} else {
				flag = false;
				console.log(flag);
				alert("유효성검사 통과실패");
			}
			
		}
	</script>
</html>

















